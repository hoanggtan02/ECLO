<?php
// Lấy danh sách acTzNumber từ bảng timeperiod
$timeperiods = $app->select("timeperiod", ["acTzNumber"]);

?>

<div class="modal fade modal-load" tabindex="-1" data-bs-backdrop="static">
    <div class="modal-dialog modal-lg pt-standalone">
        <div class="modal-content rounded-5">
            <div class="d-flex w-100 justify-content-end align-items-center position-relative">
                <button type="button" class="btn btn-primary position-absolute z-1 rounded-circle d-flex align-items-center justify-content-center width height top right" data-bs-dismiss="modal" aria-label="Close" style="--width:50px;--height:50px;--top:-5px;--right:-5px">
                    <i class="ti ti-x fs-4"></i>
                </button>
            </div>
            <div class="modal-body">
                <h5 class="fw-bold text-body mb-3"><?=$title?></h5>
                <form method="POST" action="<?=$_SERVER['REQUEST_URI']?>">
                    <div class="row g-3">
                        <div class="col-lg-12">
                            <div class="mb-3">
                                <label class="fw-bold text-body mb-2"><?=$jatbi->lang("Mã nhóm")?> <span class="text-danger">*</span></label>
                                <input type="text" name="acGroupNumber" class="form-control py-3 rounded-4 bg-body-tertiary" placeholder="<?=$jatbi->lang("Mã nhóm (điền từ 2 tới 50)")?>" value="<?=$data['acGroupNumber'] ?? ''?>">
                            </div> 
                            <div class="mb-3">
                                <label class="fw-bold text-body mb-2"><?=$jatbi->lang("Tên nhóm")?> <span class="text-danger">*</span></label>
                                <input type="text" name="name" class="form-control py-3 rounded-4 bg-body-tertiary" placeholder="<?=$jatbi->lang("Họ và Tên")?>" value="<?=$data['name'] ?? ''?>">
                            </div>

                            <!-- Dropdown acTzNumber1 -->
                            <div class="mb-3">
                                <label class="fw-bold text-body mb-2"><?=$jatbi->lang("acTzNumber1")?></label>
                                <select data-select class="form-select bg-body-tertiary py-3 rounded-4 w-100" data-live-search="true" data-width="100%" name="acTzNumber1">
                                    <option value="0"><?=$jatbi->lang("Chọn acTzNumber1")?></option>
                                    <?php
                                    foreach ($timeperiods as $tp) {
                                        $selected = ($data['acTzNumber1'] ?? '') == $tp['acTzNumber'] ? 'selected' : '';
                                        echo "<option value='{$tp['acTzNumber']}' {$selected}>{$tp['acTzNumber']}</option>";
                                    }
                                    ?>
                                </select>
                            </div>

                            <!-- Dropdown acTzNumber2 -->
                            <div class="mb-3">
                                <label class="fw-bold text-body mb-2"><?=$jatbi->lang("acTzNumber2")?></label>
                                <select data-select class="form-select bg-body-tertiary py-3 rounded-4 w-100" data-live-search="true" data-width="100%" name="acTzNumber2">
                                    <option value="0"><?=$jatbi->lang("Chọn acTzNumber2")?></option>
                                    <?php
                                    foreach ($timeperiods as $tp) {
                                        $selected = ($data['acTzNumber2'] ?? '') == $tp['acTzNumber'] ? 'selected' : '';
                                        echo "<option value='{$tp['acTzNumber']}' {$selected}>{$tp['acTzNumber']}</option>";
                                    }
                                    ?>
                                </select>
                            </div>

                            <!-- Dropdown acTzNumber3 -->
                            <div class="mb-3">
                                <label class="fw-bold text-body mb-2"><?=$jatbi->lang("acTzNumber3")?></label>
                                <select data-select class="form-select bg-body-tertiary py-3 rounded-4 w-100" data-live-search="true" data-width="100%" name="acTzNumber3">
                                    <option value="0"><?=$jatbi->lang("Chọn acTzNumber3")?></option>
                                    <?php
                                    foreach ($timeperiods as $tp) {
                                        $selected = ($data['acTzNumber3'] ?? '') == $tp['acTzNumber'] ? 'selected' : '';
                                        echo "<option value='{$tp['acTzNumber']}' {$selected}>{$tp['acTzNumber']}</option>";
                                    }
                                    ?>
                                </select>
                            </div>
                        </div>

                        <div class="col-lg-12">
                            <button type="submit" class="btn btn-primary w-100 py-3 rounded-pill fw-bold" data-action="submit" data-alert="true" data-load="this"><?=$jatbi->lang("Hoàn thành")?></button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
